# 🍱 편의점
> 구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산하고 안내하는 결제 시스템을 구현한다.

<details>
<summary>실행 결과 예시</summary>
<div>

```bash
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-3],[에너지바-5]

멤버십 할인을 받으시겠습니까? (Y/N)
Y 

==============W 편의점================
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
=============증	정===============
콜라		1
====================================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 7개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 재고 없음
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[콜라-10]

현재 콜라 4개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
N

==============W 편의점================
상품명		수량	금액
콜라		10 	10,000
=============증	정===============
콜라		2
====================================
총구매액		10	10,000
행사할인			-2,000
멤버십할인			-0
내실돈			 8,000

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
Y

안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 재고 없음 탄산2+1
- 콜라 1,000원 7개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 재고 없음
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
[오렌지주스-1]

현재 오렌지주스은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
Y

멤버십 할인을 받으시겠습니까? (Y/N)
Y

==============W 편의점================
상품명		수량	금액
오렌지주스		2 	3,600
=============증	정===============
오렌지주스		1
====================================
총구매액		2	3,600
행사할인			-1,800
멤버십할인			-0
내실돈			 1,800

감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
N
```

</div>
</details>


## 📌 편의점 시스템 작동 흐름
1. 인사 및 상품, 프로모션 안내
2. 사용자 구매 입력 
   - 프로모션 상품의 경우
     - 만약 프로모션 가능한 개수만큼 가져오지 않은 경우 추가 안내
     - 만약 프로모션 재고가 부족한 경우 프로모션 적용 불가여도 구매의사 확인 안내
   - 멤버십 할인 여부 확인
3. 영수증 출력
4. 추가 구매 안내
   - 추가 구매 : 1번부터 다시 반복
   - 추가 구매 X : 시스템 종료

## 📌 기능 요구 사항 
### 1️⃣ 상품
- **구성** : 이름, 가격, 프로모션

### 2️⃣ 재고
- **구성** : 상품, 현재 수량
- 결제 할 때마다 해당 상품의 재고 차감하여 최신 재고 상태 유지

### 3️⃣ 프로모션
- **구성** : 프로모션 이름, 필요 구매 수량, 증정 수량, 시작 날짜, 종료 날짜
- 프로모션 기간 내 포함된 경우, 재고 보유 경우에만 할인 적용
- 프로모션 재고 우선 차감 후 일반 재고 차감
- 프로모션 수량보다 적게 가져온 경우 혜택 안내
- 재고 부족 시 정가 결제 안내

### 4️⃣ 멤버십
- **구성** : 할인률, 최대 할인 금액
- 멤버십 회원은 30프로 할인
  - 프로모션 적용 상품은 멤버십 할인 적용 불가
  - 프로모션 미 적용 상품만 할인 적용
- 최대 8000원 할인

### 5️⃣ 영수증
- **구성** 
  - 구매 상품 리스트(상품명, 수량, 가격)
  - 증정 상품 리스트(상품명, 수량, 가격)
  - 금액 정보 (수량 및 총 구매액, 행사 할인 금액, 멤버십 할인 금액, 최종 결제 금액)
- 구성 요소 정렬하여 고객이 쉽게 금액과 수량 확인하도록 함
  - 가격의 경우 000 단위로 쉼표

### 6️⃣ 구매
- **구성**
  - 구매 목록 : 
    - 일반 상품 : 상품명, 수량, 프로모션 적용 수량
    - 증정 상품 : 상품명, 수량
  - 멤버십 할인 유무
  - 구매 가격 : 총 구매액, 행사 할인, 멤버십 할인, 내실 돈
- 구매 가격 계산
  - 총 구매액 : 상품가격 * 수량의 총 합
  - 행사 할인 : 상품가격 * 프로모션 적용 수량의 총 합
  - 멤버십 할인 : 미 적용시 0 / 적용 시 프로모션 적용 수량이 0인 상품에 대해 30%(최대 8000원) 할인
  - 내실 돈 : 총 구매액 - 행사 할인 - 멤버십 할인

### 7️⃣ 사용자 입력
- **구매할 상품과 수량 입력**
    - 구성 : [상품-수량],
    - 예시 : `[콜라-10],[사이다-3]`
    - 정상 입력 : 존재하는 상품, 구매 가능한 수량, 대괄호로 감쌈, 상품과 수량 하이픈으로 연결, 상품끼리는 쉼표로 구분
    - 예외 입력 : 존재하지 않는 상품, 구매 가능한 수량보다 많이 입력, 허용하지 않는 특수문자([ ] ,), 형식 잘못 입력


- **프로모션 수량보다 적은 경우, 수량만큼 추가할지 여부 입력**
    - 구성 : Y or N
    - 예시 : `Y`
    - 정상 입력 : Y또는 N 입력
    - 예외 입력 : Y또는 N이 아닌 모든 경우


- **프로모션 재고가 부족한 경우, 정가로 결제할지 여부 입력**
    - 구성 : Y or N
    - 예시 : `Y`
    - 정상 입력 : Y또는 N 입력
    - 예외 입력 : Y또는 N이 아닌 모든 경우
  

- **멤버십 할인 적용 여부 입력**
    - 구성 : Y or N
    - 예시 : `Y`
    - 정상 입력 : Y또는 N 입력
    - 예외 입력 : Y또는 N이 아닌 모든 경우
  

- **추가 구매 여부 입력**
    - 구성 : Y or N
    - 예시 : `Y`
    - 정상 입력 : Y또는 N 입력
    - 예외 입력 : Y또는 N이 아닌 모든 경우
  

- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시키고, 에러 메시지를 출력 후 그 부분부터 재 입력

### 8️⃣ 편의점 안내 출력
- 환영 인사 출력
  ```bash
  안녕하세요. W편의점입니다.
  현재 보유하고 있는 상품입니다.
  ```
- 상품 정보 출력
  - 상품명, 가격, 재고, 포로모션 이름
  - 구매 방법 설명 
  ```bash
  - 콜라 1,000원 10개 탄산2+1
  - 콜라 1,000원 10개
  - 사이다 1,000원 8개 탄산2+1
  - 사이다 1,000원 7개
  - 오렌지주스 1,800원 9개 MD추천상품
  - 오렌지주스 1,800원 재고 없음
  - 탄산수 1,200원 5개 탄산2+1
  - 탄산수 1,200원 재고 없음
  - 물 500원 10개
  - 비타민워터 1,500원 6개
  - 감자칩 1,500원 5개 반짝할인
  - 감자칩 1,500원 5개
  - 초코바 1,200원 5개 MD추천상품
  - 초코바 1,200원 5개
  - 에너지바 2,000원 5개
  - 정식도시락 6,400원 8개
  - 컵라면 1,700원 1개 MD추천상품
  - 컵라면 1,700원 10개
  
  구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])
    ```
- 프로모션 수량보다 적은 경우, 수량만큼 추가할지 안내 출력
    ```bash
    현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
    ```
- 프로모션 재고가 부족한 경우, 정가로 결제할지 안내 출력
    ```bash
    현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)
    ```
  
- 멤버십 할인 적용 안내 출력
    ```bash
    멤버십 할인을 받으시겠습니까? (Y/N)
    ```
- 영수증 출력
  - 구매 상품 내역, 증정 상품 내역, 금액 정보 출력
  ```bash
    ==============W 편의점================
    상품명		수량	금액
    콜라		3 	3,000
    에너지바 		5 	10,000
    =============증	정===============
    콜라		1
    ====================================
    총구매액		8	13,000
    행사할인			-1,000
    멤버십할인			-3,000
    내실돈			 9,000
    ```
- 추가 구매 여부 안내 출력
    ```bash
    감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
    ```

### 9️⃣ 예외 처리
- 사용자가 잘못된 값을 입력했을 때, `[ERROR]`로 시작하는 오류 메시지와 함께 상황에 맞는 안내를 출력
    - 구매할 상품과 수량 형식이 올바르지 않은 경우: `[ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요.`
    - 존재하지 않는 상품을 입력한 경우: `[ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.`
    - 구매 수량이 재고 수량을 초과한 경우: `[ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요.`
    - 기타 잘못된 입력의 경우: `[ERROR] 잘못된 입력입니다. 다시 입력해 주세요.`
